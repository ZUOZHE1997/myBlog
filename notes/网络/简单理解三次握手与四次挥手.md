## 简单理解三次握手与此次挥手

### 三次握手

有一个客户端(clint),还有一个服务端(server),他们要进行一些数据交互,
但在进行数据交互前它们双方都是处于一个关闭的状态(closed),此时有客户端发起一个请求,再发送请求之前就会先进行三次握手,互相确认对方的发送与接收能力.

1. 第一次握手
   首先客户端发送一个`SYN`报文()
2. 第二次握手
   此时服务端接收到之后会知道,诶,这个客户端有发送的能力,我也能收到他给我发的信息,那我要回应一下他,然后服务端会给客户端发送一个`SYN + ACK `报文
3. 第三次握手
   此时客户端接收到服务端发的报文之后会再给服务端发送一`ACK`报文,表示我收到你给我发送的报文了,咱俩可以建立连接了

三次握手之后服务端与客户端建立连接就可以开始通信了,有时会说我给你发一遍,你给我发一遍不就完了,干嘛这么麻烦,其实简单来说就是为了互相确认对方的接受能力与发送能力是否正常和建立一个可信的双向传输,而一般的握手两次只能建立一个单向传输

### 四次挥手

此时客户端与服务端的通信结束之后,会经历一个四次挥手的阶段

1. 第一次挥手

   诶,这次请求我完事了,那客户端先给服务端发送一个`FIN`的终止报文,并且停止数据发送,进入一个`FIN_WAIT1`(终止等待)的状态

2. 第二次挥手

   服务端在接收到`FIN1`报文后,知道了哦客户端完事了啊,那行吧,不给他发数据了,并给客户端发一个`ACK`的报文确认一下,然后就进入`CLOSE_WAIT`(关闭等待)阶段

3. 第三次挥手

   此时,服务端要结束 TCP 通信了,他得通知客户端一下啊,就和第一次挥手一样,发个`FIN`报文给客户端,并且进入一个`LAST_ACK `(最后确认) 的阶段

4. 第四次挥手

   当客户端收到`FIN`报文后,就知道了服务端要结束这次 TCP 通信了,行,那和人家说一声,发个`ASK`报文通知一下,并且进入`TIME_WAIT `(时间等待)阶段,此时服务段收到报文后,ok,关了吧,此时服务端进入`closed`状态,关闭此次 TCP 通信,但是客户端要等着 TCP 释放掉才会进入`closed`状态
